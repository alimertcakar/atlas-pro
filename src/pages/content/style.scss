@use 'themes';
// TODO parse selectors from bitbucket with a script?
//    {
//         loader: "sass-loader",
//         options: {
//           additionalData: "$bitbucketMain: " + parsedMainSelector + ";",
//         },
//       },
$bitbucketMain: '.css-kyhvoj';
$sidebarSelector: '.css-4rxc6l';
$sidebarTabSelector: '.css-1hpn4bw';
$sidebarButtonOnHover: '.css-t3yiul';
$sidebarButton: '.css-1t5na7c';
$sidebarButtonText: '.css-1olrtn';
$sidebarButtonTextHover: '.css-1h2b0g4';
$sidebarRepoName: '.css-ienhqj';
$sidebarRepoNameHover: '.css-ibmu9r';

#{$bitbucketMain} {
  & #{$sidebarSelector} {
    background-color: var(--color-main);
  }

  & #{$sidebarButton} {
    background-color: var(--color-active-surface) !important;
    color: var(--color-active-surface-text-color) !important;
  }

  & #{$sidebarButtonText} {
    color: var(--color-active-surface-text-color) !important;
  }

  & #{$sidebarButtonOnHover}#{$sidebarButtonOnHover} {
    background-color: var(--color-hover) !important;
    color: var(--color-hover-text) !important;
  }

  & #{$sidebarButtonTextHover} {
    color: var(--color-active-surface-text-color) !important;
  }

  & #{$sidebarTabSelector}::before {
    background-color: var(--color-main);
  }

  // hide +- icons on diff display
  .code-diff.syntax-highlighted.__rbb_syntax_highlight::before {
    display: none;
  }

  .chunk-heading-wrapper.gutter-width-apply-padding-left,
  .line-numbers.gutter-width-apply-width {
    background-color: var(--color-main) !important;
    color: #fff;
  }

  pre.code-component {
    background-color: var(--color-main);
    color: #62aeef;
    & .token {
      color: var(--color-token);

      &.function {
        color: var(--color-token-function);
      }
    }
  }

  div[data-testid='renderer-wrapper'] {
    &:hover {
      padding: 0.5rem;
      background-color: var(--color-main);
      border-radius: 15px;
      filter: brightness(85%);
    }
  }

  & #{$sidebarRepoName} {
    filter: brightness(85%);
  }

  & #{$sidebarRepoNameHover} {
    filter: brightness(85%);
    background-color: var(--color-main) !important;
  }
}

body:has(#{$bitbucketMain}) {
  --color-main: #1d2125;
  --color-active-surface: #1c2b41;
  --color-active-surface-text-color: #9fadbc;
  --color-hover: #09326c;
  --color-hover-text: #579dff;
  --color-token: #aab1be;
  --color-token-function: #c678dd;
  // override bitbucket to dark
  @include themes.bitbucket-dark-mode-colors;
  background-color: var(--color-main);
}
